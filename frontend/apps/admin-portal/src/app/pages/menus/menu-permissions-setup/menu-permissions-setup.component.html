<div class="menu-permissions-setup-container">
  <p-toast></p-toast>

  <p-card header="Menu Permissions Setup">
    <p class="mb-4">Assign permissions to menu: <strong>{{ menuName }}</strong></p>

    <p-table
      [value]="permissions"
      [loading]="loading"
      [scrollable]="true"
      scrollHeight="600px"
      [paginator]="true"
      [rows]="20"
      [showCurrentPageReport]="true"
      currentPageReportTemplate="Showing {first} to {last} of {totalRecords} permissions"
      [rowsPerPageOptions]="[10, 20, 50]"
    >
      <ng-template pTemplate="header">
        <tr>
          <th pSortableColumn="permissionModule">
            Module <p-sortIcon field="permissionModule"></p-sortIcon>
          </th>
          <th pSortableColumn="permissionName">
            Permission <p-sortIcon field="permissionName"></p-sortIcon>
          </th>
          <th class="text-center">View</th>
          <th class="text-center">Create</th>
          <th class="text-center">Edit</th>
          <th class="text-center">Delete</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-row>
        <tr>
          <td>{{ row.permissionModule }}</td>
          <td>{{ row.permissionName }}</td>
          <td class="text-center">
            <p-checkbox
              [(ngModel)]="row.view"
              [binary]="true"
            ></p-checkbox>
          </td>
          <td class="text-center">
            <p-checkbox
              [(ngModel)]="row.create"
              [binary]="true"
            ></p-checkbox>
          </td>
          <td class="text-center">
            <p-checkbox
              [(ngModel)]="row.edit"
              [binary]="true"
            ></p-checkbox>
          </td>
          <td class="text-center">
            <p-checkbox
              [(ngModel)]="row.delete"
              [binary]="true"
            ></p-checkbox>
          </td>
        </tr>
      </ng-template>
    </p-table>

    <div class="actions">
      <p-button
        label="Cancel"
        icon="pi pi-times"
        severity="secondary"
        (onClick)="cancel()"
        [disabled]="loading"
      ></p-button>
      <p-button
        label="Save Permissions"
        icon="pi pi-save"
        (onClick)="savePermissions()"
        [loading]="loading"
      ></p-button>
    </div>
  </p-card>
</div>
